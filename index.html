<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Cozonaci de Vânzare</title>
<style>
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background: #fff5ed; color:#333; scroll-behavior: smooth; }
h1,h2,h3 { margin:0; }
a { text-decoration:none; }
header { text-align:center; padding: 50px 20px; background: linear-gradient(135deg,#d8b494,#f4e1d2); color:white; box-shadow: 0 5px 15px rgba(0,0,0,0.1);}
header h1 { font-size: 3em; text-shadow: 1px 1px 3px rgba(0,0,0,0.2);}
header p { font-size:1.2em; margin-top:10px; position:relative; }
.cart-btn { position:absolute; top:20px; right:20px; background:#b85a40; color:white; padding:10px 15px; border:none; border-radius:12px; cursor:pointer; font-weight:bold; }
.cart-btn:hover { background:#d77a5b; }

nav { display:flex; justify-content:center; gap:25px; background:#f4e1d2; padding:12px 0; font-weight:bold; position:sticky; top:0; z-index:100; }
nav a { color:#5a2d0c; transition: 0.3s; cursor:pointer; }
nav a:hover, nav a.active { color:#d77a5b; }

section { padding:30px; text-align:center; display:none; opacity:0; transform: translateY(20px); transition: opacity 0.5s ease, transform 0.5s ease; }
section.active { display:block; opacity:1; transform: translateY(0); }

#produse .produse-container { display:flex; flex-wrap:wrap; justify-content:center; gap:25px; }
.cozonac {
  position:relative;
  background:white;
  border-radius:15px;
  overflow:hidden;
  width:260px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  transition: transform 0.3s, box-shadow 0.3s, filter 0.3s;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.cozonac:hover { transform: translateY(-10px) scale(1.03); box-shadow:0 20px 35px rgba(0,0,0,0.25); filter: brightness(1.05);}
.cozonac img { width:100%; height:200px; object-fit:cover; cursor:pointer; transition: transform 0.3s; }
.cozonac img:hover { transform: scale(1.05); }
.cozonac h3 { margin:10px 0 5px; }
.cozonac p { margin:5px 0; font-size:0.95em; color:#555; text-align:center; }
.add-cart-btn { margin:8px 0; padding:12px 20px; width:90%; border:none; border-radius:25px; font-weight:bold; cursor:pointer; transition:0.3s; background: linear-gradient(90deg,#d77a5b,#b85a40); color:white; }
.add-cart-btn:hover { background: linear-gradient(90deg,#b85a40,#d77a5b); }

.badge { position:absolute; top:10px; left:10px; background:#d77a5b; color:white; padding:5px 10px; border-radius:12px; font-size:0.8em; font-weight:bold; }

.popup-form { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:flex-start; padding-top:20px; z-index:1000; opacity:0; transition:0.3s; overflow-y:auto; }
.popup-form.active { display:flex; opacity:1; }
.popup-content { background:#fff5ed; padding:15px; border-radius:15px; width:90%; max-width:400px; text-align:left; position:relative; transform:scale(0.85); transition:0.3s; box-shadow:0 10px 25px rgba(0,0,0,0.2); }
.popup-form.active .popup-content { transform:scale(1); }
.popup-content h3 { text-align:center; margin-bottom:15px; color:#d77a5b;}
.popup-content label { display:block; margin-top:10px; font-weight:bold; font-size:0.95em; }
.popup-content input { width:90%; padding:6px 8px; margin-top:5px; border-radius:6px; border:1px solid #d8b494; font-size:0.95em; }
.popup-content button { margin-top:15px; padding:10px; font-size:1em; width:100%; }
.close-popup { position:absolute; top:15px; right:15px; cursor:pointer; font-weight:bold; font-size:22px; color:#d77a5b; }
.notification { position:fixed; top:20px; left:50%; transform:translateX(-50%); background:#d77a5b; color:white; padding:15px 25px; border-radius:25px; display:none; z-index:2000; font-weight:bold; }
footer { text-align:center; background:#d8b494; color:white; padding:25px; border-radius:20px 20px 0 0; margin-top:50px; }

#lightbox { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:2000; }
#lightbox img { max-width:90%; max-height:90%; border-radius:15px; }
#closeLightbox { position:absolute; top:20px; right:30px; font-size:40px; color:white; cursor:pointer; }

#cartSection table { width:100%; border-collapse: collapse; margin-top:15px; }
#cartSection th, #cartSection td { border:1px solid #d8b494; padding:8px; text-align:center; }
#cartSection th { background:#f4e1d2; }
#cartSection input { width:60px; text-align:center; }

@media(max-width:600px){ .popup-content { width:95%; padding:15px; } }
</style>
</head>
<body>

<header id="home">
<h1>Cozonaci de Vânzare</h1>
<p>Gusta tradiția, simte aroma!</p>
<button class="cart-btn" id="openCart">Cosul meu (<span id="cartCount">0</span>)</button>
</header>

<nav>
<a id="linkHome">Home</a>
<a id="linkProduse">Produse</a>
<a id="linkDespre">Despre noi</a>
<a id="linkContact">Contact</a>
</nav>

<section id="homeSection" class="active">
<h2>Bine ați venit pe site-ul nostru!</h2>
<p>Descoperă gustul autentic al cozonacilor de casă, preparați cu ingrediente naturale și multă pasiune.<br>
Navighează la Produse pentru a comanda cozonacul preferat!</p>
<img src="https://github.com/15tef/Cozonacii/blob/main/cozonaci%20de%20casa.jpg?raw=true" alt="Cozonaci" style="width:300px; border-radius:15px; margin-top:20px;">
</section>

<section id="produse">
<h2>Produsele noastre</h2>
<div class="produse-container">
<div class="cozonac" data-nume="Cozonac Clasic" data-price="100">
<div class="badge">Cel mai vândut</div>
<img src="https://github.com/15tef/Cozonacii/blob/main/cozonaci%20de%20casa.jpg?raw=true" alt="Cozonac Clasic">
<h3>Cozonac Clasic</h3>
<p>Cozonac pufos cu aromă de vanilie, ideal pentru sărbători sau cadouri.</p>
<p>Preț: 100 RON</p>
<button class="add-cart-btn">Adaugă în coș</button>
</div>
<div class="cozonac" data-nume="Prajitura cu mere si biscuiti" data-price="300">
<div class="badge">Nou</div>
<img src="https://github.com/15tef/Cozonacii/blob/main/prajitura%201.jpg?raw=true" alt="Prajitura cu mere si biscuiti">
<h3>Prajitură cu mere și biscuiți</h3>
<p>Straturi delicate de mere caramelizate cu biscuiți crocanți și cremă fină.</p>
<p>Preț: 300 RON</p>
<button class="add-cart-btn">Adaugă în coș</button>
</div>
<div class="cozonac" data-nume="Prajitura ciocolată și nucă" data-price="300">
<img src="https://github.com/15tef/Cozonacii/blob/main/prajitura%202.jpg?raw=true" alt="Prajitura ciocolată și nucă">
<h3>Prajitura ciocolată și nucă</h3>
<p>Blat de ciocolată, cremă fină de unt și nucă pentru adevărații iubitori de dulciuri.</p>
<p>Preț: 300 RON</p>
<button class="add-cart-btn">Adaugă în coș</button>
</div>
</div>
</section>

<section id="cartSection">
<h2>Cosul meu</h2>
<div id="cartContainer"></div>
<button class="pay-btn" id="checkoutBtn">Finalizează comanda</button>
</section>

<section id="despre">
<h2>Despre noi</h2>
<p>La Cozonaci de Vânzare ne concentrăm pe calitatea fiecărui produs.<br>
Folosim doar ingrediente naturale, fără conservanți sau aditivi.<br>
Fiecare cozonac și prăjitură este pregătit cu atenție, respectând rețete tradiționale și tehnici de coacere care păstrează aroma autentică.<br>
Scopul nostru este să oferim clienților experiența gustului autentic de acasă.<br>
Produsele sunt proaspete, moi și parfumate.<br>
Ne mândrim cu faptul că fiecare comandă este tratată cu seriozitate, iar livrarea este rapidă și sigură.<br>
Clienții noștri pot fi siguri că primesc întotdeauna produse de cea mai înaltă calitate, pregătite cu pasiune și grijă pentru detalii.</p>
</section>

<section id="contact">
<h2>Contact</h2>
<p>Telefon: 0732 920 255</p>
<p>Email: a.stef89@yahoo.com</p>
<p>Adresa: Str. Malu Spart 1, București, România</p>
</section>

<footer>
<p>&copy; 2025 Cozonaci de Vânzare. Toate drepturile rezervate.</p>
</footer>

<div class="popup-form" id="popupForm">
<div class="popup-content">
<span class="close-popup" id="closePopup">&times;</span>
<h3>Comandă produs</h3>
<form id="orderForm">
<label>Nume:</label><input type="text" id="nume" required>
<label>Prenume:</label><input type="text" id="prenume" required>
<label>Strada:</label><input type="text" id="strada" required>
<label>Număr:</label><input type="text" id="numar" required>
<label>Localitate:</label><input type="text" id="localitate" required>
<label>Județ:</label><input type="text" id="judet" required>
<label>Țară:</label><input type="text" id="tara" required>
<label>Cod poștal:</label><input type="text" id="codpostal" required>
<label>Telefon:</label><input type="text" id="telefon" required>
<label>Email:</label><input type="email" id="emailClient" required>
<label>Metoda de plată:</label>
<select id="paymentMethod" required>
<option value="Cash la livrare">Cash la livrare</option>
<option value="Plată online">Plată online</option>
</select>
<button type="submit" class="pay-btn" id="submitOrder">Trimite comanda</button>
</form>
</div>
</div>

<div class="notification" id="notification"></div>

<div id="lightbox">
  <span id="closeLightbox">&times;</span>
  <img id="lightboxImg" src="">
</div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@latest/dist/email.min.js"></script>
<script>
emailjs.init('L-7wK8ifbopduze-j');

// Navigare secțiuni
const sections = {
  home: document.getElementById('homeSection'),
  produse: document.getElementById('produse'),
  despre: document.getElementById('despre'),
  contact: document.getElementById('contact'),
  cart: document.getElementById('cartSection')
};
function showSection(sec){
  for(let key in sections) sections[key].classList.remove('active');
  sections[sec].classList.add('active');
  history.replaceState(null,'','#'+sec);
}

document.getElementById('linkHome').addEventListener('click', ()=>showSection('home'));
document.getElementById('linkProduse').addEventListener('click', ()=>showSection('produse'));
document.getElementById('linkDespre').addEventListener('click', ()=>showSection('despre'));
document.getElementById('linkContact').addEventListener('click', ()=>showSection('contact'));
document.getElementById('openCart').addEventListener('click', ()=>showSection('cart'));

window.addEventListener('load', ()=>{
  const hash = location.hash.replace('#','');
  if(sections[hash]) showSection(hash);
  else showSection('home');
});
window.addEventListener('popstate', ()=>{
  const hash = location.hash.replace('#','');
  if(sections[hash]) showSection(hash);
  else showSection('home');
});

// Cos
let cart = [];
const cartContainer = document.getElementById('cartContainer');
const cartCount = document.getElementById('cartCount');

function updateCartUI(){
  cartCount.textContent = cart.reduce((sum,item)=>sum+item.cantitate,0);
  if(cart.length === 0) cartContainer.innerHTML = "<p>Cosul este gol.</p>";
  else {
    let html = `<table><tr><th>Produs</th><th>Pret</th><th>Cantitate</th><th>Subtotal</th><th>Sterge</th></tr>`;
    cart.forEach((item,index)=>{
      html+=`<tr>
        <td>${item.nume}</td>
        <td>${item.price} RON</td>
        <td><input type="number" min="1" value="${item.cantitate}" data-index="${index}" class="qtyInput"></td>
        <td>${item.price*item.cantitate} RON</td>
        <td><button class="removeBtn" data-index="${index}">X</button></td>
      </tr>`;
    });
    const total = cart.reduce((sum,item)=>sum+item.price*item.cantitate,0);
    html+=`<tr><th colspan="3">Total</th><th colspan="2">${total} RON</th></tr></table>`;
    cartContainer.innerHTML = html;

    document.querySelectorAll('.qtyInput').forEach(input=>{
      input.addEventListener('change', ()=>{
        const idx = input.dataset.index;
        const val = parseInt(input.value);
        if(val>0) { cart[idx].cantitate=val; updateCartUI(); }
      });
    });
    document.querySelectorAll('.removeBtn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        cart.splice(btn.dataset.index,1); updateCartUI();
      });
    });
  }
}

document.querySelectorAll('.add-cart-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const cozonac = btn.closest('.cozonac');
    const nume = cozonac.dataset.nume;
    const price = Number(cozonac.dataset.price);
    const exist = cart.find(p=>p.nume===nume);
    if(exist) exist.cantitate++;
    else cart.push({nume, price, cantitate:1});
    updateCartUI();
    showNotification(`${nume} a fost adăugat în coș.`, "#5a2d0c");
  });
});

// Checkout
let currentPayment = 'Cash la livrare';
const popup=document.getElementById('popupForm');
const closePopup=document.getElementById('closePopup');
const notification=document.getElementById('notification');

function showNotification(msg,color="#d77a5b"){
  notification.style.backgroundColor=color;
  notification.textContent=msg;
  notification.style.display="block";
  setTimeout(()=>{notification.style.display="none";},4000);
}

document.getElementById('checkoutBtn').addEventListener('click', ()=>{
  if(cart.length===0){ showNotification("Cosul este gol!", "red"); return; }
  popup.classList.add('active');
});

// Popup comanda
closePopup.addEventListener('click',()=>popup.classList.remove('active'));
window.addEventListener('click', e=>{if(e.target===popup) popup.classList.remove('active');});

document.getElementById('orderForm').addEventListener('submit', async e=>{
  e.preventDefault();
  const nume=document.getElementById('nume').value.trim();
  const prenume=document.getElementById('prenume').value.trim();
  const strada=document.getElementById('strada').value.trim();
  const numar=document.getElementById('numar').value.trim();
  const localitate=document.getElementById('localitate').value.trim();
  const judet=document.getElementById('judet').value.trim();
  const tara=document.getElementById('tara').value.trim();
  const codpostal=document.getElementById('codpostal').value.trim();
  const telefon=document.getElementById('telefon').value.trim();
  const emailClient=document.getElementById('emailClient').value.trim();
  currentPayment=document.getElementById('paymentMethod').value;

  if(!nume||!prenume||!strada||!numar||!localitate||!judet||!tara||!codpostal||!telefon||!emailClient){
    showNotification('Completează toate câmpurile corect!','red');
    return;
  }

  const total = cart.reduce((sum,item)=>sum+item.price*item.cantitate,0);

  if(currentPayment==='Plată online'){
    alert(`Plata online se face în contul Revolut:\nRO78 REVO 0000 1205 7231 3572\nTotal: ${total} RON\nApasă OK după efectuarea plății`);
  }

  function getCartText(){ return cart.map(item=>`${item.nume} - Cantitate: ${item.cantitate} - Preț unitar: ${item.price} RON`).join('\n'); }

  // Email client
  const templateParamsClient = {
    to_email: emailClient,
    nume, prenume,
    produse: getCartText(),
    total_plata: total,
    metoda_plata: currentPayment
  };
  await emailjs.send('service_rvnfvip','template_g7g6e4w',templateParamsClient).catch(()=>{});

  // Email owner
  const templateParamsOwner = {
    nume, prenume, strada, numar, localitate, judet, tara, codpostal, telefon, emailClient,
    produse: getCartText(),
    total_plata: total,
    metoda_plata: currentPayment
  };
  await emailjs.send('service_rvnfvip','template_6epkz6a',templateParamsOwner).catch(()=>{});

  showNotification('Comanda trimisă cu succes! Veți primi confirmarea comenzii pe email.','green');
  popup.classList.remove('active');
  cart = []; updateCartUI();
});

// Lightbox
const productImages = document.querySelectorAll('.cozonac img');
const lightbox = document.getElementById('lightbox');
const lightboxImg = document.getElementById('lightboxImg');
const closeLightbox = document.getElementById('closeLightbox');

productImages.forEach(img=>{
  img.addEventListener('click',()=>{
    lightboxImg.src = img.src;
    lightbox.style.display='flex';
  });
});
closeLightbox.addEventListener('click',()=>lightbox.style.display='none');
lightbox.addEventListener('click', e=>{ if(e.target===lightbox) lightbox.style.display='none'; });
</script>

</body>
</html>
